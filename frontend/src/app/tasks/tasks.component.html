<!-- TOP NAVBAR -->
<app-navbar></app-navbar>

<!-- DASHBOARD CONTAINER -->
<div class="dashboard">

  <h2 class="page-title">Dashboard</h2>


  <!-- CREATE TASK CARD -->
  <div class="card">
    <h3>Create Task</h3>

    <div class="form-row">
      <input
        type="text"
        placeholder="Task title"
        [(ngModel)]="title"
      />

      <input
        type="text"
        placeholder="Task description"
        [(ngModel)]="description"
      />

      <button class="primary-btn" (click)="addTask()">
        Add Task
      </button>
    </div>
  </div>

  <!-- TASK LIST CARD -->
  <div class="card">
    <h3>Your Tasks</h3>

    <ul class="task-list">
      <li *ngFor="let task of tasks">

        <!-- VIEW MODE -->
        <div *ngIf="editingTaskId !== task.id" class="task-row">
          <div>
            <strong>{{ task.title }}</strong>
            <p>{{ task.description }}</p>
          </div>

          <div class="actions">
            <button class="secondary-btn" (click)="startEdit(task)">
              Edit
            </button>
            <button class="danger-btn" (click)="deleteTask(task.id)">
              Delete
            </button>
          </div>
        </div>

        <!-- EDIT MODE -->
        <div *ngIf="editingTaskId === task.id" class="edit-card">

          <label>Title</label>
          <input
            [(ngModel)]="editTitle"
            class="input-full"
            placeholder="Task title"
          />

          <label>Description</label>
          <textarea
            [(ngModel)]="editDescription"
            class="textarea-full"
            placeholder="Task description"
            rows="3"
          ></textarea>

          <div class="edit-actions">
            <button class="btn-save" (click)="updateTask()">Save</button>
            <button class="btn-cancel" (click)="cancelEdit()">Cancel</button>
          </div>

        </div>


      </li>
    </ul>

    <!-- EMPTY STATE -->
    <p class="empty" *ngIf="tasks.length === 0">
      No tasks found. Create your first task!
    </p>
  </div>

</div>
